<!DOCTYPE html>
<!-- Documento HTML5 -->
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">

    <!-- Título exibido no navegador -->
    <title>Concessionária - Carros</title>

    <!-- Bootstrap para estilização da página -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>

<!-- container centraliza e mt-4 adiciona margem superior -->
<body class="container mt-4">

<h1>Carros cadastrados</h1>

<!-- ============================================
     FORMULÁRIO DE BUSCA POR MODELO
     ============================================ -->
<div class="mb-3">
    <!--
        Formulário GET para filtrar por modelo.
        Envia o parâmetro "modelo" para a rota /carros.
        O controller detecta o parâmetro e aplica o filtro.
    -->
    <form class="row g-2" th:action="@{/carros}" method="get">

        <!-- Campo de texto para digitar o filtro -->
        <div class="col-auto">
            <input class="form-control"
                   type="text"
                   name="modelo"
                   placeholder="Buscar por modelo"
                   th:value="${filtroModelo}">
        </div>

        <!-- Botão para enviar a busca -->
        <div class="col-auto">
            <button class="btn btn-primary" type="submit">Buscar</button>
        </div>

        <!-- Botão para limpar o filtro e voltar à lista completa -->
        <div class="col-auto">
            <a class="btn btn-secondary" th:href="@{/carros}">Limpar</a>
        </div>
    </form>
</div>

<!-- ============================================
     BOTÃO DE NOVO CARRO
     ============================================ -->
<div class="mb-3">
    <!-- Link para tela de criação de novo carro -->
    <a class="btn btn-success" th:href="@{/carros/novo}">+ Novo carro</a>
</div>

<!-- ============================================
     TABELA DE CARROS
     ============================================ -->
<table class="table table-striped">
    <thead>
    <tr>
        <th>Modelo</th>
        <th>Marca</th>
        <th>Ano</th>
        <th>Preço</th>
        <th>Ações</th>
    </tr>
    </thead>

    <tbody>
    <!--
        th:each percorre a lista enviada pelo controller.
        "carro : ${carros}" significa:
        - Para cada carro na lista "carros"
        - Cria uma linha na tabela
    -->
    <tr th:each="carro : ${carros}">

        <!-- Exibe cada atributo em sua coluna -->
        <td th:text="${carro.modelo}"></td>
        <td th:text="${carro.marca}"></td>
        <td th:text="${carro.ano}"></td>

        <!-- Formatação do preço:
             - formatDecimal(valor, mínimo de casas, separador de decimal,
                              máximo de casas, separador de milhar)
        -->
        <td th:text="${#numbers.formatDecimal(carro.preco, 2, 'POINT', 2, 'COMMA')}"></td>

        <!-- Botões de ação: editar e excluir -->
        <td>
            <!-- Monta URL dinâmica /carros/editar/ID -->
            <a th:href="@{/carros/editar/{id}(id=${carro.id})}"
               class="btn btn-primary btn-sm">Editar</a>

            <!-- Monta URL dinâmica /carros/excluir/ID -->
            <a th:href="@{/carros/excluir/{id}(id=${carro.id})}"
               class="btn btn-danger btn-sm">Excluir</a>
        </td>

    </tr>
    </tbody>
</table>

</body>
</html>
